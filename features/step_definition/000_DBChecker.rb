
Before do
	require 'helpers/setupHelper'
	@setup = SetupHelper.new
	$ss.dbSnapshots(File.basename(__FILE__,".rb") + 'Before')
end

After do
	$ss.dbSnapshots(File.basename(__FILE__,".rb") + 'After')
end
#///////////////////////////////////////////////////////////////////////////////////////////////////
# BACKGROUND
#///////////////////////////////////////////////////////////////////////////////////////////////////
Given /^The Database is New and Untouched$/ do
	@testname = File.basename(__FILE__,".rb")
	$ss.reloadDB
	$ss.takeScreenShot(@testname,"Given")
	$b.goto $baseURL 
end
#///////////////////////////////////////////////////////////////////////////////////////////////////

#///////////////////////////////////////////////////////////////////////////////////////////////////
# STEP 1
#///////////////////////////////////////////////////////////////////////////////////////////////////
When /^I run the "(.*?)" utility (\d+) times$/ do |arg1, arg2|
	count=1
	Integer(arg2).times do
		@setup.runUtility("DBChecker")
		$ss.takeScreenShot(@testname,"Step" + count.to_s + "a")
		@setup.dBcheckerStatus
		$ss.takeScreenShot(@testname,"Step" + count.to_s + "b")
		count+=1
	end
end
#///////////////////////////////////////////////////////////////////////////////////////////////////

#///////////////////////////////////////////////////////////////////////////////////////////////////
#Step 2
#///////////////////////////////////////////////////////////////////////////////////////////////////
Then /^there should be no index changes$/ do 
	@setup.dBcheckerResults
	$ss.takeScreenShot(@testname,"Step3")
end
#///////////////////////////////////////////////////////////////////////////////////////////////////

