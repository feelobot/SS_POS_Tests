Before do
	@load = LoadSS.new
	@load.loadDriver
	@load.dbSnapshots('000_DBChecker\Before')
	@tab = Tabs.new
	@bttn = Bttns.new
	@utility = Utilities.new
	
end

After do
	@load.dbSnapshots('000_DBChecker\After')
end
#///////////////////////////////////////////////////////////////////////////////////////////////////
# BACKGROUND
#///////////////////////////////////////////////////////////////////////////////////////////////////
Given /^The Database is New and Untouched$/ do
	@load.reloadDB
	@load.takeScreenShot("000_DBChecker_Start")
	@load.gotoSS
end
#///////////////////////////////////////////////////////////////////////////////////////////////////

#///////////////////////////////////////////////////////////////////////////////////////////////////
# STEP 1
#///////////////////////////////////////////////////////////////////////////////////////////////////
When /^I run dbchecker utility$/ do
	@tab.setup
	@bttn.utilities
	@utility.dbChecker
	@load.takeScreenShot("000_DBChecker_Step1")
end
#///////////////////////////////////////////////////////////////////////////////////////////////////

#///////////////////////////////////////////////////////////////////////////////////////////////////
# STEP 2
#///////////////////////////////////////////////////////////////////////////////////////////////////
When /^I run dbchecker again$/ do
	@tab.setup
	@bttn.utilities
	@utility.dbChecker
	$wait.until { $driver.find_element(:xpath, "//b[2]").text == "Database check completed"}
	@load.takeScreenShot("000_DBChecker_Step2")
end
#///////////////////////////////////////////////////////////////////////////////////////////////////

#///////////////////////////////////////////////////////////////////////////////////////////////////
#Step 3
#///////////////////////////////////////////////////////////////////////////////////////////////////
Then /^there should be no index changes$/ do 
	$wait.until { $driver.find_element(:xpath, "//li").text == "0 Table changes made" }
	$wait.until { $driver.find_element(:xpath, '//li[2]').text == "0 Field changes made" }
	$wait.until { $driver.find_element(:xpath, "//li[3]").text == "0 Index changes made" }
	@load.takeScreenShot("000_DBChecker_Step3")
end
#///////////////////////////////////////////////////////////////////////////////////////////////////

