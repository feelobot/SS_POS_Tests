
#///////////////////////////////////////////////////////////////////////////////////////////////////
# BACKGROUNDS
#///////////////////////////////////////////////////////////////////////////////////////////////////
Given /^The Database is New and Untouched$/ do
	@testname = File.basename(__FILE__,".rb")
	$ss.loadDBSnapshot("000a")
	puts "000a DB Loaded"
	$ss.takeScreenShot(@testname,"Given")
	$b.goto $baseURL 
end
#///////////////////////////////////////////////////////////////////////////////////////////////////

#///////////////////////////////////////////////////////////////////////////////////////////////////
# Utilities
#///////////////////////////////////////////////////////////////////////////////////////////////////
When /I run the "(.*?)" utility/ do |arg1|
	@frame = $b.frame(:name => "content").frame(:name => "setupcontent")
	@frame.button(:text, arg1).click
end

	#///////////////////////////////////////////////////////////////////////////////////////////////////
	#CHECK DATABASE STRUCTURE
	#///////////////////////////////////////////////////////////////////////////////////////////////////
	When /^Wait for "(.*?)"$/ do |arg1|
		Watir::Wait.until(120){@frame.b(:text, "Database check completed").exists?}
	end

	Then /^there should be no database changes$/ do 
			Watir::Wait.until(120){
				@frame.li(:text, "0 Table changes made").exists?
				@frame.li(:text, "0 Field changes made").exists?
				@frame.li(:text, "0 Index changes made").exists?
			}
		$ss.takeScreenShot(@testname,"Step3")
	end
	#///////////////////////////////////////////////////////////////////////////////////////////////////

